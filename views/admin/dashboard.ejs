<%- include('../partials/admin-header') %>

<h2 class="text-2xl font-semibold mb-6">Selamat Datang, <%= admin.username %> ðŸ‘‹</h2>

<!-- Statistik Kartu -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
  <!-- Kategori -->
  <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition transform hover:-translate-y-1">
    <h3 class="text-sm font-medium text-gray-500 mb-1">Total Kategori</h3>
    <p class="text-4xl font-bold text-blue-600"><%= total_kategori %></p>
  </div>

  <!-- Produk -->
  <div class="bg-white p-6 rounded-2xl shadow hover:shadow-lg transition transform hover:-translate-y-1">
    <h3 class="text-sm font-medium text-gray-500 mb-1">Total Produk</h3>
    <p class="text-4xl font-bold text-indigo-600"><%= total_produk %></p>
  </div>

  <!-- Placeholder -->
  <div class="bg-white p-6 rounded-2xl shadow text-center text-sm text-gray-400 flex items-center justify-center hover:shadow-lg transition">
    âœ¨ Info gestun, voucher, dsb bisa ditampilkan nanti di sini
  </div>
</div>

<!-- Grafik Produk per Kategori -->
<div class="mt-10 bg-white p-6 rounded-2xl shadow">
  <h3 class="text-lg font-semibold text-gray-700 mb-4">Grafik Jumlah Produk per Kategori</h3>
  <div class="w-full overflow-x-auto">
    <canvas id="produkChart" style="min-width: 400px; max-width: 100%; height: auto;"></canvas>
  </div>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Grafik Produk -->
<script>
  const ctx = document.getElementById('produkChart').getContext('2d');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: <%- JSON.stringify((produkPerKategori || []).map(p => p.kategori)) %>,
      datasets: [{
        label: 'Jumlah Produk',
        data: <%- JSON.stringify((produkPerKategori || []).map(p => p.jumlah)) %>,
        backgroundColor: 'rgba(99, 102, 241, 0.6)',
        borderColor: 'rgba(99, 102, 241, 1)',
        borderWidth: 1,
        borderRadius: 6,
        maxBarThickness: 50,
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          ticks: {
            color: '#374151',
            font: { size: 12 }
          },
          grid: { display: false }
        },
        y: {
          beginAtZero: true,
          ticks: {
            precision: 0,
            color: '#4B5563',
            font: { size: 12 }
          },
          grid: {
            color: '#E5E7EB'
          }
        }
      },
      plugins: {
        legend: {
          display: false
        },
        tooltip: {
          backgroundColor: '#1F2937',
          titleColor: '#fff',
          bodyColor: '#fff',
          borderWidth: 1,
          borderColor: '#3B82F6'
        }
      }
    }
  });
</script>

<%- include('../partials/admin-footer') %>
