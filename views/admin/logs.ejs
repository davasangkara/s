<!-- views/admin/logs.ejs -->
<%- include('../partials/admin-header') %>

<h2 class="text-2xl font-bold mb-4">Log Aktivitas</h2>

<div class="bg-white rounded-2xl shadow overflow-hidden">
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead class="bg-gray-50 text-gray-600">
        <tr>
          <th class="px-4 py-3 text-left">Waktu</th>
          <th class="px-4 py-3 text-left">Admin</th>
          <th class="px-4 py-3 text-left">Aksi</th>
          <th class="px-4 py-3 text-left">Entitas</th>
          <th class="px-4 py-3 text-left">ID</th>
          <th class="px-4 py-3 text-left">Meta</th>
        </tr>
      </thead>
      <tbody class="divide-y">
        <% if ((logs||[]).length === 0) { %>
          <tr><td colspan="6" class="px-4 py-6 text-center text-gray-500">Belum ada log.</td></tr>
        <% } %>
        <% (logs||[]).forEach(l => { %>
          <tr>
            <td class="px-4 py-3 text-gray-600"><%= new Date(l.created_at).toLocaleString('id-ID') %></td>
            <td class="px-4 py-3"><%= l.username || '—' %></td>
            <td class="px-4 py-3"><span class="inline-flex px-2 py-0.5 rounded bg-blue-50 text-blue-700"><%= l.action %></span></td>
            <td class="px-4 py-3"><%= l.entity || '—' %></td>
            <td class="px-4 py-3"><%= l.entity_id || '—' %></td>
            <td class="px-4 py-3 text-gray-500">
              <pre class="whitespace-pre-wrap text-xs"><%= l.meta ? JSON.stringify(l.meta, null, 2) : '' %></pre>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include('../partials/admin-footer') %>
