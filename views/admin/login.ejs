<%- include('../partials/header') %>

<section class="relative min-h-[80vh] flex items-center justify-center overflow-hidden">
  <!-- bg gradient -->
  <div class="absolute inset-0 bg-gradient-to-b from-indigo-50 via-white to-pink-50"></div>
  <div class="absolute -top-24 -right-24 w-[420px] h-[420px] rounded-full bg-indigo-200/30 blur-3xl"></div>
  <div class="absolute -bottom-24 -left-24 w-[420px] h-[420px] rounded-full bg-pink-200/30 blur-3xl"></div>

  <!-- card -->
  <div class="relative w-full max-w-md mx-auto">
    <div class="backdrop-blur-xl bg-white/80 border border-slate-100 shadow-xl rounded-2xl p-6 md:p-7">
      <!-- brand -->
      <div class="flex flex-col items-center text-center">
        <div class="w-12 h-12 rounded-xl grid place-items-center bg-indigo-100 text-indigo-600 mb-3">
          <!-- simple lock icon -->
          <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M16 11V7a4 4 0 10-8 0v4M5 11h14v8a2 2 0 01-2 2H7a2 2 0 01-2-2v-8z"/>
          </svg>
        </div>
        <h1 class="text-2xl font-extrabold tracking-tight text-slate-900">Login Admin</h1>
        <p class="text-slate-600 text-sm mt-1">Masuk untuk mengelola dashboard.</p>
      </div>

      <!-- error -->
      <% if (error) { %>
        <div class="mt-4 bg-rose-50 border border-rose-200 text-rose-700 rounded-xl px-4 py-2 text-sm">
          <div class="flex items-start gap-2">
            <svg class="w-4 h-4 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M18 10A8 8 0 11 2 10a8 8 0 0116 0zm-7-4a1 1 0 10-2 0v4a1 1 0 102 0V6zm-1 8a1.5 1.5 0 100-3 1.5 1.5 0 000 3z" clip-rule="evenodd"/>
            </svg>
            <span><%= error %></span>
          </div>
        </div>
      <% } %>

      <!-- form -->
      <form method="POST" action="/admin/login" class="space-y-4 mt-5" id="loginForm" autocomplete="on">
        <!-- Username -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Username</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M5.121 17.804A8 8 0 1118.88 6.196M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </span>
            <input
              type="text" name="username" required
              class="w-full pl-11 pr-3 py-2.5 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400"
              placeholder="admin"
            />
          </div>
        </div>

        <!-- Password -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Password</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M12 11c.944 0 1.714.77 1.714 1.714v2.572A1.714 1.714 0 0112 17h0a1.714 1.714 0 01-1.714-1.714v-2.572C10.286 11.77 11.056 11 12 11z"/>
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M6 11V7a6 6 0 1112 0v4M6 11h12v7a2 2 0 01-2 2H8a2 2 0 01-2-2v-7z"/>
              </svg>
            </span>
            <input
              id="password" type="password" name="password" required
              class="w-full pl-11 pr-11 py-2.5 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400"
              placeholder="••••••••"
            />
            <button type="button" id="togglePass"
              class="absolute right-2.5 top-1/2 -translate-y-1/2 p-1.5 rounded-lg hover:bg-slate-100 text-slate-500"
              aria-label="Tampilkan/ sembunyikan password">
              <svg id="eyeOpen" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M2 12s3.6-7 10-7 10 7 10 7-3.6 7-10 7S2 12 2 12z"/>
                <circle cx="12" cy="12" r="3" />
              </svg>
              <svg id="eyeClosed" class="w-5 h-5 hidden" fill="none" stroke="currentColor" stroke-width="1.8" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3 3l18 18M10.585 10.585A3 3 0 0012 15a3 3 0 002.121-.879M9.88 4.514A10.23 10.23 0 0112 5c6.4 0 10 7 10 7a18.7 18.7 0 01-4.092 4.796M6.2 6.2A18.7 18.7 0 002 12s3.6 7 10 7c1.467 0 2.82-.276 4.018-.77"/>
              </svg>
            </button>
          </div>
          <p id="capsHint" class="hidden mt-1 text-xs text-amber-600">Caps Lock aktif</p>
        </div>

        <!-- Extras -->
        <div class="flex items-center justify-between text-sm">
          <label class="inline-flex items-center gap-2 select-none">
            <input type="checkbox" class="rounded border-slate-300 text-indigo-600 focus:ring-indigo-400">
            <span class="text-slate-600">Ingat saya</span>
          </label>
          <span class="text-slate-400">v1.0</span>
        </div>
        <!-- Submit -->
        <button
          type="submit"
          class="w-full py-2.5 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-700 shadow transition"
        >
          Masuk
        </button>
      </form>
    </div>

    <!-- foot note -->
    <p class="mt-4 text-center text-xs text-slate-500">
      © <script>document.write(new Date().getFullYear())</script> DigitalConvert • Admin Panel
    </p>
  </div>
</section>

<script>
  // Toggle password
  (function(){
    const pw = document.getElementById('password');
    const btn = document.getElementById('togglePass');
    const openI = document.getElementById('eyeOpen');
    const closeI = document.getElementById('eyeClosed');
    const capsHint = document.getElementById('capsHint');

    btn?.addEventListener('click', ()=>{
      const isText = pw.type === 'text';
      pw.type = isText ? 'password' : 'text';
      openI.classList.toggle('hidden', !isText);
      closeI.classList.toggle('hidden', isText);
      pw.focus();
    });

    // Caps Lock hint
    pw?.addEventListener('keyup', (e)=>{
      capsHint.classList.toggle('hidden', !e.getModifierState('CapsLock'));
    });
  })();
</script>

<%- include('../partials/footer') %>
